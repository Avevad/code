## CODE
**CODE** - настраиваемый эмулятор устройств OpenComputers (**C**ustomizable **O**penComputers **D**evice **E**mulator)

### Компиляция
Linux:
```shell script
mkdir cmake-build-debug
cd cmake-build-debug
cmake ..
make
```

### Запуск
Перед запуском следует создать папку проекта (см. "Создание проекта"), считаем что она находится в \<папка_проекта\>.
##### Эмуляция компьютера
Linux:
```shell script
./code <папка_проекта> start <имя_компьютера>
```

### Создание проекта
**CODE** работает с _проектами_. Проекты состоят из _компонентов_ и _компьютеров_. Для хранения данных проекта используется следующая структура _папки проекта_:
```
папка_проекта/
    components/
        имя_компонента_1.тип_компонента_1/
            address.txt
            [файлы конфигурации компонента №1 ...]
        имя_компонента_2.тип_компонента_2/
            address.txt
            [файлы конфигурации компонента №2 ...]
        [...]
    computers/
        имя_компьютера_1/
            address.txt
            tempfs.txt
            memory.txt
            components.txt
        имя_компьютера_2/
            address.txt
            tempfs.txt
            memory.txt
            components.txt
        [...]
    font.ttf
```
Таким образом, для нормального функционирования эмулятора в папке проекта нужно иметь файл шрифта,
используемого компонентами (экранами и видеокартами) проекта - _font.ttf_, папку для хранения компонентов - _components_ и 
папку для хранения компьютеров - _computers_. Подробнее про конфигурацию компьютеров и компонентов - см. следующие разделы.

Для лучшего понимания структуры папки проекта можно ознакомиться с примером проекта - он находится в папке _sample_project_.
Данный проект содержит несколько компонентов, по мере разработки эмулятора проект может быть расширен. Актуальность ПО 
(ОС, загрузчики) в этом проекте не гарантируется. Также в этом проекте содержится файл шрифта, который, по мнению
автора эмулятора, лучше остальных подходит для использования в эмуляторе - [Unifont by St. GIGAFONT Typefaces](https://www.fontspace.com/unifont-font-f26370 "Страница шрифта").
Можно использовать этот же шрифт в своих проектах или выбрать другой.

### Конфигурация компьютера
Для создания компьютера следует придумать для него название, создать папку с таким именем в директории _computers_ папки проекта,
разместить в ней следующие файлы конфигурации и заполнить их в соответствии с характеристиками компьютера:
1. _address.txt_ - адрес компьютера (см. раздел "Адреса компонентов").
1. _tempfs.txt_ - имя компонента-файловой системы, который будет использоваться в качестве временной ФС компьютера.
1. _memory.txt_ - кол-во оперативной памяти компьютера в байтах.
1. _components.txt_ - названия компонентов, подключенных к компьютеру, каждое в отдельной строке (см. "Конфигурация компонентов").

### Конфигурация компонентов
Для создания компонента нужно для него придумать название, выбрать тип (см. "Типы компонентов") и создать папку в директории _components_ папки проекта
с названием _<имя_компонента>.<тип_компонента>_. После этого в созданную папку добавить файл _address.txt_ с адресом компонента (см. раздел "Адреса компонентов").
Далее, в эту же папку нужно добавить файлы конфигурации компонента, свои для каждого типа компонента, подробнее о них - в следующем разделе.

### Типы компонентов
_<над этим разделом идет работа>_

В OpenComputers есть много типов компонентов, однако не все удается быстро реализовать. В следующем списке указаны типы компонентов, 
которые уже реализованы (хотя бы частично), а также необходимые для них файлы конфигурации. В будущем список будет пополнен (надеюсь). 

#### eeprom ([EEPROM](https://ocdoc.cil.li/component:eeprom))
Реализован частично.  
Файлы конфигурации:
* _primary.lua_ - основные данные EEPROM.
* _secondary.bin_ - дополнительные данные EEPROM.
* _label.txt_ - метка EEPROM.
#### filesystem ([Файловая система](https://ocdoc.cil.li/component:filesystem))
Реализован полностью.  
Файлы конфигурации:
* _data_ - папка с данными ФС.
* _label.txt_ - метка файловой системы.
* _readonly.txt_ - наличие данного файла означает, что ФС доступна только для чтения.
#### screen ([Экран](https://ocdoc.cil.li/component:screen))
Реализован частично.  
Файл конфигурации:
* _config.txt_ - содержит 5 чисел через пробел: глубина цвета, ширина и высота (в блоках), макс. ширина и высота (в символах).
#### gpu ([Видеокарта](https://ocdoc.cil.li/component:gpu))
Реализован частично.  
Файл конфигурации:
* _config.txt_ - содержит 3 числа через пробел: глубина цвета, макс. ширина и высота (в символах).
#### keyboard
Документация по данному типу компонента не была найдена, поэтому компонент реализован только для совместимости.  
Этот тип компонента не требует файлов конфигурациию.
#### computer ([Компьютер](https://ocdoc.cil.li/component:computer))
Реализован частично.  
Этот компонент не нужно создавать в проекте, он автоматически будет подключен к компьютеру.
#### internet ([Интернет-карта](https://ocdoc.cil.li/component:internet))
Не реализован (идет работа).

### Адреса компонентов
Каждый компонент и компьютер помимо названия имеет свой адрес. В отличие от названия, цель которого сократить время ввода 
компонентов и компьютеров во время конфигурации, адресу не следует придавать особое значение - он должен быть случайным.
В Linux адрес для компонента можно сгенерировать следующей командой: ```uuidgen -r``` (``` > address.txt``` если требуется).
